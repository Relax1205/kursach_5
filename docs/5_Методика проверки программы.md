# 5. Методика проверки программы

## 5.1. Общие положения

Проверка корректности работы программы осуществляется комбинированным методом, включающим автоматизированное модульное тестирование и ручное функциональное тестирование. Такой подход обеспечивает высокую степень покрытия функциональности и позволяет выявить как логические ошибки в коде, так и проблемы взаимодействия с пользователем.

## 5.2. Автоматизированное тестирование

Автоматизированные тесты реализованы с использованием встроенного фреймворка unittest, интегрированного в Django. Все тесты расположены в файле core/tests.py и охватывают следующие компоненты:

- **Модели данных**: проверка корректности создания объектов Category, Transaction, Budget; соблюдение ограничений (например, уникальность пары «название + тип + пользователь» для категории).
- **Формы**: валидация входных данных (положительная сумма, корректная дата, привязка к пользователю), обработка ошибок.
- **Сервисный слой**: корректность агрегационных функций (расчёт месячного дохода/расхода), импорт и экспорт CSV.
- **Представления**: проверка доступности страниц, корректность HTTP-статусов, обработка POST-запросов.

Запуск тестов осуществляется командой:
python manage.py test

Ожидаемый результат: все тесты проходят успешно (статус OK), количество обнаруженных ошибок и сбоев — 0.

Примеры проверяемых сценариев:
- Создание транзакции с отрицательной суммой должно вызывать ошибку валидации.
- Экспорт в CSV должен содержать заголовок и все транзакции пользователя.
- Импорт CSV с двумя строками данных должен создать ровно две новые транзакции.
- Удаление транзакции должно быть невозможно для неавторизованного пользователя или при попытке удалить чужую запись.

## 5.3. Ручное функциональное тестирование

Ручное тестирование проводится путём последовательного выполнения пользовательских сценариев в веб-интерфейсе. Ниже приведены ключевые тест-кейсы.

### Тест-кейс 1: Регистрация и вход в систему
1. Перейти на страницу /accounts/login/.
2. Ввести корректные учётные данные.
3. Убедиться, что происходит перенаправление на главную страницу (/).
4. Проверить наличие элементов навигации (кнопки «Транзакции», «+ Транзакция» и др.).

### Тест-кейс 2: Управление категориями
1. Нажать кнопку «+ Категория».
2. Заполнить форму: название — «Продукты», тип — «Расход».
3. Сохранить.
4. Убедиться, что категория появилась в списке при создании транзакции.

### Тест-кейс 3: Добавление и удаление транзакции
1. Перейти на страницу «+ Транзакция».
2. Выбрать категорию «Продукты», сумму 1500, дату сегодня.
3. Сохранить.
4. Убедиться, что транзакция отображается в списке.
5. Нажать «Удалить» → подтвердить действие.
6. Убедиться, что транзакция исчезла из списка.

### Тест-кейс 4: Фильтрация и отчёты
1. Добавить несколько транзакций за разные даты и категории.
2. Использовать фильтр по дате и категории — проверить, что отображаются только соответствующие записи.
3. Перейти в раздел «Отчёты» — убедиться, что отображается диаграмма и сводка по доходам/расходам.

### Тест-кейс 5: Импорт и экспорт данных
1. Нажать «Экспорт CSV» — проверить, что скачивается файл transactions.csv.
2. Открыть файл — убедиться, что структура соответствует ожидаемой.
3. Перейти в «Импорт CSV», загрузить корректный CSV-файл.
4. Убедиться, что транзакции из файла появились в списке.

### Тест-кейс 6: Работа с бюджетом
1. Перейти в раздел «Бюджеты».
2. Установить бюджет 5000 на категорию «Продукты» на текущий месяц.
3. Добавить транзакцию по этой категории на сумму 3000.
4. Убедиться, что в отчётах отображается остаток по бюджету (2000).

## 5.4. Критерии успешной проверки

Программа считается прошедшей проверку, если:
- Все автоматизированные тесты завершаются успешно.
- Все ручные тест-кейсы выполняются без ошибок.
- Интерфейс корректно отображается в поддерживаемых браузерах.
- Нет критических сбоев (ошибок 500) при стандартном использовании.
- Данные одного пользователя недоступны другому (проверяется через создание второго аккаунта).

Таким образом, предложенная методика обеспечивает всестороннюю проверку функциональности, надёжности и безопасности программы.